<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Secundario RPG</title>
    <link rel="stylesheet" href="stilus.css">
    <link rel="stylesheet" href="stilus.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Ficha de Personagem</h1>

        <div class="status-box ficha-header-box">
            
            <div class="header-layout">
                
                <div class="header-avatar-area">
                    <div class="avatar-wrapper">
                        <img id="char-image-display" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzFDMUMzQSIgc3Ryb2tlPSIjMDBGRkZGIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSI4IiByPSI0Ii8+PHBhdGggZD0iTTQgMjF2LTFhNCA0IDAgMCAxIDQtNGg4YTQgNCAwIDAgMSA0IDR2MSIvPjwvc3ZnPg==" alt="Foto">
                        
                        <label for="char-image-upload" class="avatar-overlay">
                            <span>üì∑</span>
                        </label>
                        <input type="file" id="char-image-upload" accept="image/*" onchange="carregarImagemPersonagem(event)">
                    </div>
                </div>

                <div class="header-data-area">
                    
                    <div class="header-top-row" style="display: flex; justify-content: space-between; align-items: center; gap: 10px; width: 100%;">
                        <div class="nome-input-group" style="flex-grow: 1;">
                            <label for="nome-personagem-input">Nome:</label>
                            <input type="text" id="nome-personagem-input" value="Novo Her√≥i" style="font-size: 1.2rem; width: 100%;">
                        </div>
                        
                        <div class="gestao-botoes">
                            <button onclick="baixarFicha()" class="mod-btn compact-btn baixar-btn">üíæ Salvar</button>
                            <label for="upload-ficha" class="mod-btn compact-btn carregar-btn">‚¨ÜÔ∏è Carregar</label>
                            <input type="file" id="upload-ficha" accept=".json" style="display: none;" onchange="carregarFicha(event)">
                        </div>
                    </div>
                
                    <div class="header-info-row">
 <div class="info-group">
        <label>Talento</label>
        <textarea id="cabecalho-talento" class="auto-resize" rows="1"></textarea>
    </div>
    <div class="info-group">
        <label>Ascens√£o</label>
        <textarea id="cabecalho-ascensao" class="auto-resize" rows="1"></textarea>
    </div>
    <div class="info-group">
        <label>Racial</label>
        <textarea id="cabecalho-racial" class="auto-resize" rows="1"></textarea>
    </div>
    <div class="info-group" style="flex: 2;">
        <label>Info</label>
        <textarea id="cabecalho-info" class="auto-resize" rows="1"></textarea>
    </div>
</div>
                    </div>
                </div>

            </div>
        </div>
        
        <div class="flex-container">
            
            <div class="col-left">
                
                <h2>Recursos</h2>
                <div class="recurso-box">
                    <div class="recurso-item">HP: <span id="hp-display">0</span></div>
                    <div class="recurso-item">ST: <span id="st-display">0</span></div>
                    <div class="recurso-item">MP: <span id="mp-display">0</span></div>
                    <div class="recurso-item">PSI: <span id="psi-display">0</span></div>
                </div>

                <h2>Atributos</h2>
                <div class="status-box" id="atributos-container">
                    <div class="atributo-row" data-nome="Forca">
                        <label>For√ßa</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>

                    <div class="atributo-row" data-nome="Destreza">
                        <label>Destreza</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>

                    <div class="atributo-row" data-nome="Agilidade">
                        <label>Agilidade</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>

                    <div class="atributo-row" data-nome="Resistencia">
                        <label>Resist√™ncia</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                           
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>

                    <div class="atributo-row" data-nome="Esp√≠rito">
                        <label>Esp√≠rito</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>
                    
                    <div class="atributo-row" data-nome="Carisma">
                        <label>Carisma</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>

                    <div class="atributo-row" data-nome="Inteligencia">
                        <label>Intelig√™ncia</label>
                        <div class="atributo-input-group">
                            <button class="mod-btn compact-btn" onclick="decrementAttr(this)">-</button>
                            <input type="number" class="atributo-input" value="1" min="0" oninput="atualizarSistemaCompleto()">
                            <button class="mod-btn compact-btn" onclick="incrementAttr(this)">+</button>
                        </div>
                        <div class="treino-info">
                            <span>Uso: <span class="treino-contador">0</span> / <span class="atributo-valor-display">1</span></span>
                            <button class="treinar-btn">Treinar</button>
                        </div>
                    </div>
                </div>

                <hr>

                <h2>Habilidades (Skills)</h2>
                <div id="skills-container"></div>
                <button onclick="adicionarSkill()" class="mod-btn" style="width: 100%; margin-top: 10px;">+ Nova Skill</button>
            </div>

            <div class="col-right">
                
                <h2>Nivel & Limites</h2>
                <div class="status-box">
                    <p>N√≠vel Atual: <span id="nivel-display">0.1</span></p> 
                    <p>Total de Pontos Permitidos: <span id="total-pontos">0</span></p>
                    <p>Limite de Atributo (Min/Max): <span id="limites-attr"></span></p> 
                </div>
                
                <hr style="margin-top: 20px; border-color: #555;">

                <h2>Pontos de Per√≠cias</h2>
                <div class="status-box">
                    <h3>Pontos Dispon√≠veis</h3>
                    <p>Principal: <span id="pericia-principal-pts" class="pericia-total-gastos">0</span> | Gasto: <span id="pericia-principal-gastos" class="pericia-total-gastos">0</span></p>
                    <p>Secund√°ria: <span id="pericia-secundaria-pts" class="pericia-total-gastos">0</span> | Gasto: <span id="pericia-secundaria-gastos" class="pericia-total-gastos">0</span></p>
                    <p>Terci√°ria: <span id="pericia-terciaria-pts" class="pericia-total-gastos">0</span> | Gasto: <span id="pericia-terciaria-gastos" class="pericia-total-gastos">0</span></p>
                </div>
                
                <div class="pericia-header-editavel">
                    <span class="pericia-icone">ü•á</span>
                    <input type="text" class="pericia-titulo-input" id="titulo-principal" value="Per√≠cias Principais">
                </div>
                <div id="pericias-principal"></div>
                <button onclick="adicionarPericia('principal')" class="mod-btn" style="width: 100%; margin-top: 5px;">+ Adicionar Principal</button>

                <div class="pericia-header-editavel">
                    <span class="pericia-icone">ü•à</span>
                    <input type="text" class="pericia-titulo-input" id="titulo-secundaria" value="Per√≠cias Secund√°rias">
                </div>
                <div id="pericias-secundaria"></div>
                <button onclick="adicionarPericia('secundaria')" class="mod-btn" style="width: 100%; margin-top: 5px;">+ Adicionar Secund√°ria</button>

                <div class="pericia-header-editavel">
                    <span class="pericia-icone">ü•â</span>
                    <input type="text" class="pericia-titulo-input" id="titulo-terciaria" value="Per√≠cias Terci√°rias">
                </div>
                <div id="pericias-terciaria"></div>
                <button onclick="adicionarPericia('terciaria')" class="mod-btn" style="width: 100%; margin-top: 5px;">+ Adicionar Terci√°ria</button>

                <hr style="margin-top: 20px; border-color: #555;">

                <h2>Invent√°rio</h2>
                
                <div class="status-box" style="padding: 10px;">
                    <div class="inv-form-header">
                        <select id="inv-categoria" class="inv-input" onchange="atualizarFormularioInventario()">
                            <option value="item">Item / Po√ß√£o</option>
                            <option value="arma">Arma</option>
                            <option value="armadura">Armadura</option>
                        </select>
                        <select id="inv-raridade" class="inv-input">
                            <option value="Comum">Comum</option>
                            <option value="Incomum">Incomum</option>
                            <option value="Raro">Raro</option>
                            <option value="Rar√≠ssima">Rar√≠ssima</option>
                            <option value="√âpico">√âpico</option>
                            <option value="Lend√°rio">Lend√°rio</option>
                            <option value="M√≠tico">M√≠tico</option>
                        </select>
                        <input type="number" id="inv-qtd" class="inv-input" value="1" min="1" placeholder="Qtd" style="width: 60px;">
                    </div>
                    
                    <input type="text" id="inv-nome" class="inv-input" placeholder="Nome do Item" style="width: 100%; margin-top: 5px;">
                    
                    <div id="inv-campo-extra" style="margin-top: 5px;"></div>

                    <textarea id="inv-desc" class="inv-input" rows="2" placeholder="Descri√ß√£o do Item..." style="width: 100%; margin-top: 5px;"></textarea>
                    
                    <button onclick="adicionarItemInventario()" class="mod-btn adicionar-inv-btn" style="width: 100%; margin-top: 5px;">üì• Adicionar / Somar</button>
                </div>

                <div id="inventario-container"></div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <div id="cropper-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Ajustar Imagem</h3>
            <div class="img-container-crop">
                <img id="image-to-crop" src="" alt="Imagem para recortar">
            </div>
            <div class="modal-buttons">
                <button onclick="cancelarRecorte()" class="mod-btn" style="border-color: var(--cor-perigo); color: var(--cor-perigo);">Cancelar</button>
                <button onclick="confirmarRecorte()" class="mod-btn" style="border-color: var(--cor-sucesso); color: var(--cor-sucesso);">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>